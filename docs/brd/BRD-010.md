# Business Requirement Document

**Document ID:** BRD-010  
**Title:** Workflow-Specific Output Formats  
**Version:** 1.0  
**Date:** 2025-12-06  
**Status:** ‚úÖ Approved | üîÑ Partially Implemented  
**Author:** System Architect

---

## 1. Executive Summary

Different workflows (transcribe, translate, subtitle) require different output formats. Transcribe and translate workflows should output text transcripts only, while subtitle workflow generates full subtitle tracks. This reduces processing time by 15-30% for transcript-only workflows and provides users with the exact output format they need.

---

## 2. Business Objectives

### 2.1 Problem Statement
- Current pipeline always generates subtitle files, even for transcribe/translate workflows
- Users running transcribe workflow don't need subtitle generation (stages 08-12)
- Unnecessary subtitle generation adds 15-30% to processing time
- Output formats don't match user intent (transcript users get .srt files)

### 2.2 Goals
- **Primary:** Match output format to workflow intent
- **Secondary:** Reduce processing time by skipping unnecessary stages
- **Tertiary:** Improve user experience with appropriate outputs

### 2.3 Success Criteria
- ‚úÖ Transcribe workflow outputs .txt transcript only
- ‚úÖ Translate workflow outputs translated .txt transcript only
- ‚úÖ Subtitle workflow outputs full subtitle tracks (.srt, .vtt)
- ‚úÖ 15-30% time reduction for transcript workflows
- ‚úÖ Documentation clearly states output format per workflow

---

## 3. Stakeholders

| Role | Responsibility |
|------|----------------|
| Content Creators | Receive appropriate output format |
| Pipeline Developers | Implement conditional stage execution |
| QA Team | Validate correct outputs per workflow |
| Documentation | Update workflow guides |

---

## 4. User Requirements

### 4.1 User Stories

**US-001:** As a **transcriptionist**, I want **text transcript output** so that **I can use it for documentation without dealing with subtitle files**.

**Acceptance Criteria:**
- [x] Transcribe workflow outputs .txt file
- [x] Output location documented
- [x] Pipeline skips subtitle stages (08-12)
- [x] 15-30% faster than full pipeline

**US-002:** As a **translator**, I want **translated text transcript** so that **I can use it for translation validation without subtitle overhead**.

**Acceptance Criteria:**
- [ ] Translate workflow outputs translated .txt
- [ ] Pipeline runs stages 01-07 + 10 only
- [ ] Original and translated transcripts available
- [ ] Faster than full subtitle workflow

**US-003:** As a **subtitle creator**, I want **full subtitle tracks** so that **I can embed them in video files**.

**Acceptance Criteria:**
- [x] Subtitle workflow generates .srt/.vtt files
- [x] Multiple language tracks supported
- [x] Runs full 12-stage pipeline
- [x] High-quality context-aware subtitles

---

## 5. Functional Requirements

### FR-001: Workflow Detection
**Priority:** Critical  
**Description:** Detect workflow type from job.json  
**Rationale:** Enable conditional stage execution

**Status:** ‚úÖ Complete

### FR-002: Transcribe Workflow Output
**Priority:** High  
**Description:** Output text transcript for transcribe workflow  
**Rationale:** Provide appropriate format

**Status:** üîÑ Partial (needs validation)

### FR-003: Translate Workflow Output
**Priority:** High  
**Description:** Output translated text transcript  
**Rationale:** Provide appropriate format

**Status:** ‚è≥ Planned

### FR-004: Subtitle Workflow Output
**Priority:** High  
**Description:** Output full subtitle tracks  
**Rationale:** Provide appropriate format

**Status:** ‚úÖ Complete

### FR-005: Stage Skipping Logic
**Priority:** Critical  
**Description:** Skip subtitle-specific stages for transcript workflows  
**Rationale:** Improve performance

**Status:** üîÑ Partial

---

## 6. Non-Functional Requirements

### 6.1 Performance
- **Transcribe Workflow:** 15-30% faster (skip stages 08-12)
- **Translate Workflow:** 10-20% faster (skip stages 08-09, 11-12)
- **Subtitle Workflow:** No change (full pipeline)

### 6.2 Quality
- **Transcript Quality:** Unchanged (same ASR/alignment)
- **Translation Quality:** Unchanged (same translation engine)
- **Subtitle Quality:** Unchanged for subtitle workflow

### 6.3 Usability
- **Output Location:** Clear documentation per workflow
- **File Naming:** Consistent convention
- **Format:** Human-readable text for transcripts

---

## 7. Constraints & Assumptions

### 7.1 Constraints
- **Workflow Separation:** Workflows must be mutually exclusive
- **Stage Dependencies:** Must maintain required stage order
- **Output Location:** Follow stage isolation pattern

### 7.2 Assumptions
- Users know which workflow they need before starting
- Transcript output is sufficient for transcribe/translate workflows
- Users can convert transcript to other formats if needed

---

## 8. Dependencies

- **AD-010:** Workflow-specific output architecture
- **run-pipeline.py:** Orchestration logic
- **Stage 07 (alignment):** Transcript generation
- **Stage 10 (translation):** Translation output

---

## 9. Risks & Mitigation

| Risk | Impact | Probability | Mitigation Strategy |
|------|--------|-------------|---------------------|
| Users confused about workflow differences | Medium | Medium | Clear documentation, error messages |
| Breaking changes for existing scripts | Medium | Low | Version documentation, migration guide |
| Incomplete outputs if stages skipped incorrectly | High | Low | Thorough testing, validation checks |

---

## 10. Timeline & Milestones

| Phase | Duration | Deliverable | Status |
|-------|----------|-------------|--------|
| Phase 1 | Complete | Architecture decision (AD-010) | ‚úÖ Done |
| Phase 2 | 2-3 hours | Transcribe workflow implementation | üîÑ Partial |
| Phase 3 | 2-3 hours | Translate workflow implementation | ‚è≥ Planned |
| Phase 4 | 1 hour | Documentation updates | ‚è≥ Planned |

**Estimate:** 2-3 hours remaining  
**Performance Gain:** 15-30% for transcript workflows

---

## 11. Related Documents

- **Technical Requirement:** [TRD-010](../trd/TRD-010.md)
- **Architecture Decision:** [AD-010](../../docs/ARCHITECTURE.md#ad-010)
- **Copilot Instructions:** [.github/copilot-instructions.md](../../.github/copilot-instructions.md) ¬ß 1.5

---

## 12. Approval

| Role | Status | Date |
|------|--------|------|
| Business Owner | ‚úÖ Approved | 2025-12-06 |
| Tech Lead | ‚úÖ Approved | 2025-12-06 |
| QA Lead | ‚úÖ Approved | 2025-12-06 |

---

## 13. Change History

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0 | 2025-12-06 | System Architect | Initial creation and approval |
| 1.1 | 2025-12-08 | System | Backfill into BRD/TRD framework |
